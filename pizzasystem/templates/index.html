{% extends "base.html" %}

{% block content %}

{% if order %}
    <h4>{{ order.date }}</h4>
    <table class="table table-striped table-bordered">
    <tr>
        <th>Pizza</th>
        <th>Brus</th>
        <th>Hvitl√∏ksdressing</th>
        <th>Bestiller</th>
        <th>PizzaBuddy</th>
        <th></th>
    </tr>
    {% for pizza in order.pizza_set.all %}
        <tr>
            <td>{{ pizza.pizza }}</td>
            <td>{{ pizza.soda }}</td>
            <td>{{ pizza.dressing }}</td>
            <td>{{ pizza.user.username }}</td>
            <td>{{ pizza.buddy.username }}</td>
            {% if user == pizza.user or user == pizza.buddy %}
                <td>
                    <a href="{% url edit pizza.id %}"><button class="btn btn-primary">edit</button></a>
                    <a href="{% url delete pizza.id %}"><button class="btn btn-danger">delete</button></a></td>
            {% endif %}
            {% if user not in order.used_users and user != pizza.user and pizza.need_buddy %}
                <td><a href={% url join pizza.id %}><button class="btn btn-warning">join</button></a></td>
            {% endif %}
         </tr>
    {% endfor %}
    </table>
{% else %}
    <p>No orders available.</p>
{% endif %}
{% if user not in order.used_users %}
    <a href="{% url newpizza %}"><button class="btn btn-primary">New order</button></a>
{% endif %}
       
{% endblock content %}
